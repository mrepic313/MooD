<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>How am I feeling?</title>
</head>
<body>
    <h1>Which diary entry should I analyze?</h1>
    <form id="upload-form" enctype="multipart/form-data">
        <input type="file" id="file" name="file" accept=".txt" required>
        <button type="submit">Analyze</button>
    </form>

    <h2>This is how you're feeling:</h2>
    <ul id="emotions-list"></ul>

    <script>
        document.getElementById("upload-form").onsubmit = async (e) => {
            e.preventDefault();
            const formData = new FormData();
            formData.append("file", document.getElementById("file").files[0]);

            const response = await fetch("/analyze", {
                method: "POST",
                body: formData
            });

            if (response.ok) {
                const emotions = await response.json();
                const emotionsList = document.getElementById("emotions-list");
                emotionsList.innerHTML = "";
                emotions.forEach(([emotion, score]) => {
                    const listItem = document.createElement("li");
                    listItem.textContent = `${emotion}: ${score.toFixed(2)}`;
                    emotionsList.appendChild(listItem);
                });
            } else {
                alert("Error uploading file");
            }
        };
    </script>
</body>
</html>
